<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./SqlPage.css" rel="stylesheet" />
    <title>About SQL</title>
  </head>
  <body>
    <header>
      <img src="../../IMG/logo.png" alt="Logo" id="Logo" />
      <div class="menu">
        <a href="../mainPage/main.html">home</a>
        <a href="../rakingPage/ranking.html">ranking</a>
      </div>
      <div id="searchContainer">
        <input
          type="text"
          id="searchBar"
          placeholder="search anything you want"
        />
        <img src="../../img/search.png" alt="검색창" />
      </div>
    </header>
    <div id="container">
      <div id="leftBar">
        <img src="../../img/Sql.png" id="SqlImg" />
        <div id="contents">
          <span>목차</span>
          <hr />
          <ul>
            <li><a href="#1">개요</a></li>
            <li><a href="#2">특징</a></li>
            <li><a href="#3">문법</a></li>
            <ul id="inList">
              <li><a href="#3-1">Select</a></li>
              <li><a href="#3-2">Update</a></li>
              <li><a href="#3-3">Delete</a></li>
              <li><a href="#3-4">Drop</a></li>
            </ul>
          </ul>
        </div>
      </div>
      <div id="content">
        <h1 id="1">개요</h1>
        <hr />
        <pre><span class="blue">SELECT</span> "Hello, World!";</pre>
        <span class="style1">Structured Query Language: SQL</span><br />
        데이터베이스 시스템에서 자료를 처리하는 용도로 사용되는 구조적 데이터
        질의 언어. 에스큐엘, 혹은 시퀄이라고 읽는다. 로고는 SQL을 사용하는
        회사별로 색상을 다르게 해 표현한다. 그러나 심볼 자체는 두꺼운 원반을
        원통 모양으로 쌓은 모양이 공용으로 쓰인다. 여기서 두꺼운 원반은
        하드디스크의 플래터를 의미한다.<br />
        <h1 id="2">특징</h1>
        <hr />
        이 직관적인 언어는 어느 데이터베이스에서나 기본으로 제공하기 때문에
        배워두면 여러 곳에서 쓸데가 많다. 다만, NoSQL 계열에서는 SQL 문을
        사용하지 않는다. 그러나 DBMS벤더에 따라 사용하는 SQL에는 다소 차이가
        있다. 그래서 ANSI SQL이라고 하는 표준 SQL 구문이 있으나 DBMS 시장을
        독식하고 있는 오라클이 잘 지키지 않아서 거기다가 오픈소스 DBMS인 MySQL도
        표준 따위는 지키질 않는다. 현실은 시궁창. 최근 인기를 얻고 있는
        PostgreSQL은 표준 SQL을 잘 지키고 있다. 일반적으로 사용하는
        데이터베이스는 RDB(관계형 데이터베이스)이며, RDB에서 데이터 처리는
        데이터 모음인 테이블을 기준으로 이루어지기 때문에 SQL 역시 테이블을
        염두에 두고 읽으면 이해하기 쉽다. 아래 구문 설명 및 예제는 공통적으로
        대문자는 키워드, 소문자는 이름이나 값 등 변수를 의미하고, 주로 사용되는
        WHERE 옵션은 중괄호로 표기한다. SQL은 대소문자를 구분하지 않으므로
        SELECT와 select는 같은 것이다. 물론 따옴표로 인용된 '값'은 대소문자를
        구분한다. 문자열을 대소문자를 구분하지 않게 하려면 명령 맨 뒤에 COLLATE
        NOCASE를 붙인다. 또한 대부분의 DBMS는 세미콜론(;)을 입력하지 않으면
        명령어를 계속 입력하고 있다고 간주한다. GUI를 사용할 경우
        GUI프론트엔드에서 알아서 세미콜론을 붙여 주기 때문에 잘 모르고 넘어갈 수
        있는데 터미널로 작업할 경우에는 이것 때문에 셸이 먹통이 되는 경우가
        있다. 그리고 쿼리를 연습할 때 주의할 점이 한 가지 있는데 SQL 구문은
        탐욕스럽다(Greedy)는 것이다. SQL은 가능한 넓은 범위에 걸처 작업하려고
        한다. 따라서 WHERE절이나 LIMIT 구문을 생략하면 SELECT의 경우 끝도 없이
        출력하는 레코드열을 보게 될 것이고 UPDATE와 DELETE의 경우 사보타주에
        가까운 광역 변조(파괴)가 일어난다. 또한 대부분의 DBMS에서는 트랜잭션
        BEGIN을 먼저 걸고 작업하지 않는 한 작업을 취소(UNDO)할 수 없다. 다시
        말해 BEGIN을 입력하지 않고 DELETE from table; 을 입력한 경우 ROLLBACK
        명령을 입력해도 소용이 없다. 가장 치명적인 오타로 WHERE절 입력 직전에
        따옴표를 닫는다는게 바로 옆의 세미콜론을 잘못 쳐서 오타를 낸 경우. 이
        경우 앞의 명령어를 모든 레코드에 대해 수행해서 테이블을 파괴해 버린 뒤에
        뒤쪽 명령어를 '문법 오류'로 출력한다. 따라서 UPDATE, DELETE를 실행해보기
        전에는 반드시 BEGIN을 입력하여 트랜잭션을 시작한 뒤에 해당 쿼리를
        실행하고, 실행 결과가 의도한 대로인지를 SELECT로 검증한 뒤에 의도한
        결과대로 쿼리가 수행되었음을 확인하고 나서, COMMIT을 입력하여 트랜잭션을
        '적용'하는 습관을 들이는 게 좋다. 만약 뭔가가 잘못되었을 경우 즉시
        ROLLBACK 명령을 입력하면 BEGIN을 입력한 뒤에 행한 모든 작업이 취소된다.
        GUI의 경우에는 여러 쿼리를 입력했을 경우 마지막 SELECT의 결과를 보여주는
        기능이 탑재되어 있다는 전제 아래(그렇지 않은 GUI 프론트엔드도 있다. 이
        경우 그냥 OK 한 줄 보여주고 끝이다) 처음부터 BEGIN; ~ ROLLBACK; 블럭을
        미리 입력해 두고 작업을 하는 게 안전하다. 일단 SQL을 입력할 때에는 절대
        함부로 엔터키를 눌러선 안 된다. 지적확인을 하는 게 도움이 될 수도 있다.
        특히 WHERE절 앞뒤를 매우 꼼꼼하게 살펴야 하고 WHERE절이 없는 쿼리는
        무조건 틀렸다고 간주하자. SQL은 기본값이 rm -rf /라고 생각하는 게
        편하다. 아예 날쿼리를 함부로 넣지 말라고 프로시저(Procedure)라는 쿼리
        템플릿 기능을 제공한다. 참고로 SQL과 PL/SQL은 다른 것이다. PL/SQL이
        SQL을 포함하고 있기는 하지만 SQL을 자유자재로 쓸 정도의 실력이 되지
        않았는데 PL/SQL을 공부하면 안 된다. 금융계에서는 PL/SQL을 널리 쓰니까
        은행에 개발자로 취업하려면 꼭 배워야 하지만 배울 때 배우더라도 SQL을
        자신있게 다룰 수 있게 된 다음의 일이다. 진도를 빨리 빼고 싶은 욕심에
        SQL도 모르는 채로 PL/SQL에 도전했다간 기존에 공부한 데이터베이스의
        이론체계에 혼동을 일으켜 오히려 진도가 뒤로 후퇴한다.<br />
        <h1 id="3">문법</h1>
        <hr />
        <h3 id="3-1">Select</h3>
        데이터를 읽어오는 구문. 현업에서 사용하다 보면 가장 복잡하고 고려할
        사항이 많은, 중요하고 어려운 구문이다.
        <pre><span class="blue">SELECT</span> field1, field2, ... <span class="blue">FROM table</span> {<span class="blue">WHERE</span> 조건};</pre>
        서비스시 가장 빈번하게 사용되는 구문이다. 테이블에서 지정된 값을
        가져오는 구문이며, 모든 값을 가져오기 위해 으레 field 부분을 생략하고
        *로 표기하기도 한다. SUM이나 COUNT 같은 집계 함수가 들어가기도 한다.
        <pre><span class="blue">SELECT</span> field1 <span class="blue">AS</span> f1 <span class="blue">FROM table</span> {<span class="blue">WHERE</span> 조건};</pre>
        필드명을 바꿔서 가져와야 할 경우 AS 구문을 사용한다.
        <pre><span class="blue">SELECT</span> * <span class="blue">FROM</span> document <span class="blue">WHERE</span> author='무명씨';</pre>
        작성자가 '무명씨'인 모든 문서의 모든 항목를 가져오는 구문.
        <pre>
<span class="blue">SELECT</span> title<span class="blue"> FROM</span> document <span class="blue">WHERE</span> date >= to_date('2011/09/01', 'yyyy/mm/dd/');</pre>
        2011년 9월 1일 이후로 작성된 모든 문서의 제목을 가져오는 구문(to_date
        함수는 문자열을 시간 데이터로 바꾸는 함수로 오라클 한정). 날짜와 날짜
        사이를 검색할 때는 Between A and B 형식으로도 가능하다.
        <pre>
<span class="blue">SELECT</span> title <span class="blue">FROM</span> document <span class="blue">WHERE</span> date <span class="blue">BETWEEN</span> ('2011/09/01', 'yyyy/mm/dd/') AND</span>('2023/02/26', 'yyyy/mm/dd/');</pre
        >
        2011년 9월 1일부터 2023년 2월 26까지 작성된 모든 문서의 제목을 가져오는
        구문이다. SELECT * FROM document WHERE no BETWEEN 1 AND 10; 1 이상 10
        이하의 번호를 가지는 document 테이블 내의 모든 항목을 가져오는 구문.
        <pre><span class="blue">SELECT</span> * <span class="blue">FROM</span> document <span class="blue">WHERE</span> author <span class="blue">in</span> ('무명씨','홍길동');</pre>
        작성자가 무명씨, 홍길동인 문서의 모든 항목을 가져오는 구문.
        <pre><span class="blue">SELECT</span> * <span class="blue">FROM</span> document <span class="blue">WHERE</span> author <span class="blue">like</span> '김*';</pre>
        작성자가 김으로 시작되는 문서의 모든 항목을 가져오는 구문. '김%' 꼴로
        표현하기도 한다. 실제 업무에서는 여러 쿼리를 조합하거나 테이블을 UNION,
        INTERSECTION, JOIN 등으로 가공하여 사용하는 경우가 많으므로 쿼리가 매우
        복잡해진다.
        <pre>
<span class="blue">SELECT</span> document <span class="blue">FROM</span> ( <span class="blue">SELECT</span> document, COUNT(document) cnt <span class="blue">FROM</span> rel_document_keyword <span class="blue">WHERE</span> keyword 
<span class="blue">IN</span> ( <span class="blue">SELECT</span> id <span class="blue">FROM</span> keyword <span class="blue">WHERE</span> keyword <span class="blue">IN</span> ('key1', 'key2', 'key3', 'key4') ) <span class="blue">GROUP BY</span> document ) <span class="blue">WHERE</span> cnt=4;</pre
        >
        역 인덱스 문서 검색 쿼리인데 특정 키워드가 포함된 문서를 고속으로 찾는
        쿼리이다. key1, key2, key3, key4라는 키워드가 모두 포함된 문서를 찾는다.
        다만, 위와 같이 인라인 뷰를 사용하는 경우는 주의해야 할 점이 있다.
        인라인 뷰를 통해 접근할 데이터의 수를 어떻게 해서든 최소화 해야한다는
        것이다. 인라인 뷰 안의 SQL 문에서는 WHERE절에서 인덱스가 잘 적용되겠지만
        인라인 뷰 바깥에서는 인라인 뷰 내부에서 조회된 데이터가 마치 엑셀
        쉬트처럼 인덱스고 뭐고 없는 데이터 덩어리가 되어버리기 때문이다.
        이것때문에 인라인 뷰와 비슷하게 생성되는 스냅샷의 경우 별도로 스냅샷에
        인덱스를 생성하는 경우가 많다
        <br />
        <h3 id="3-2">Update</h3>
        <pre><span class="blue">UPDATE</span> table <span class="blue">SET</span> field1=value1, field2=value2, {<span class="blue">WHERE</span> 조건};</pre> 
        데이터를
        수정하는 구문으로 table의 field1에 value1, field2에 value2, ... 로
        변경한다. WHERE 절이 없을 경우 테이블의 모든 항목이 바뀌므로, 대개
        WHERE절과 함께 사용하여 범위를 한정해 준다. UPDATE document SET
        title='무제' WHERE author='무명씨'; 작성자가 '무명씨'인 모든 문서의
        제목을 '무제'로 바꾸는 명령. 위 예제로는 보여주기 어렵겠지만, SELECT
        문으로 특정 데이터를 쿼리해서 UPDATE 문으로 수정하는 경우가 현업에서는
        의외로 자주 발생한다. 이런 경우 상관없는 데이터가 영향을 받는지, 그리고
        업데이터 작업이 신속히 끝날 수 있는지 철저히 검증하고 작업을 해야 한다.
        엄한 데이터에 영향을 주던가, DB 락 걸리게 하기 딱이다.
        <br />
        <h3 id="3-3">Delete</h3>
        <pre><span class="blue">DELETE FROM</span> table {<span class="blue">WHERE</span> 조건};</pre>
        데이터를 삭제하는 구문. 말 그대로 데이터를 삭제하는 구문이다. 조건절이
        없을 경우 테이블의 모든 데이터를 비우게 되므로, 대개 조건절과 함께
        사용된다.
        <h3 id="3-4">Drop</h3>
        <pre><span class="blue">DROP TABLE</span> table_name;</pre>
        데이터베이스 내의 개체를 삭제해 버린다. 즉, 테이블 내의 데이터 뿐만
        아니라 구조까지 모조리 날려버리는 궁극의 명령어이다. 실수로 사용중인 DB
        내에서는 쓰지 않기를 바란다. 만약 이 명령어로 회사의 데이터를 날려먹었을
        경우... 상사에게 깨지거나 회사에서 해고당하는 정도로 끝나면 다행으로,
        고소장이 날아오는 경우도 많다고 한다. 참고로 DB의 DROP 명령은 트랜젝션의
        보호를 받지 못해 Rollback(UNDO)이 안 된다. 오라클의 플래시백 기능 같은걸
        세팅해 놓았다면 천만다행이기는 한데...
        <pre><span class="blue">DROP DATABASE</span> database_name;</pre>
        데이터베이스 내의 모든 테이블, 스키마, 관계(Relation)를 전부 삭제한다.
        워낙에 치명적인 명령어라서 슈퍼유저 권한이 아니면 명령이 먹히지 않는다.
        어쨌거나 이 명령이 서비스중인 DB에서 실행되면 해당 서버를 물리적으로
        파괴한 것과 동등한 위력을 발휘한다.사보타주 참고로 상단의 4개(SELECT,
        INSERT, UPDATE, DELETE)는 데이터 조작어(DML)이지만 DROP는 데이터
        정의어(DDL)이다. 학습 용도로는 이해할 필요가 없지만 DB회사 취직 시 가끔
        물어보는 경우가 있으니 참고할 것. 만약 외우기가 힘들다면 데이터
        제어어(DCL)에 해당하는 GRANT(권한 부여), REVOKE(권한 회수)만 외우고
        CREATE만 DDL에 속하며 나머지 6자리 글자의 명령어는 DML이라고 외우자.
      </div>
    </div>
  </body>
</html>
